<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéÅ –†–æ–∑—ã–≥—Ä—ã—à –ü–æ–¥–∞—Ä–∫–æ–≤</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- –®–∞–ø–∫–∞ —Å –±–∞–ª–∞–Ω—Å–æ–º -->
        <header class="header">
            <div class="logo">
                <h1>üéÅ GiftBox</h1>
                <p class="tagline">–†–æ–∑—ã–≥—Ä—ã—à –ø–æ–¥–∞—Ä–∫–æ–≤ —Å —Å—é—Ä–ø—Ä–∏–∑–æ–º!</p>
            </div>
            <div class="user-balance">
                <div class="balance-card">
                    <div class="balance-info">
                        <span class="balance-label">–í–∞—à –±–∞–ª–∞–Ω—Å:</span>
                        <span class="balance-amount" id="user-balance">1000 ‚ÇΩ</span>
                    </div>
                    <div class="commission-info">
                        <small>–ö–æ–º–∏—Å—Å–∏—è: 5%</small>
                    </div>
                </div>
                <button class="btn btn-small btn-outline" onclick="showTransactions()">
                    <i class="fas fa-history"></i>
                </button>
            </div>
        </header>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <main class="main-content">
            <!-- –°–µ–∫—Ü–∏—è —Å –∫–µ–π—Å–∞–º–∏ -->
            <section class="cases-section">
                <div class="section-header">
                    <h2><i class="fas fa-gift"></i> –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–µ–π—Å—ã</h2>
                    <button class="btn btn-small" onclick="createNewCase()">
                        <i class="fas fa-plus"></i> –°–æ–∑–¥–∞—Ç—å –∫–µ–π—Å
                    </button>
                </div>
                
                <div class="cases-grid" id="cases-container">
                    <!-- –ö–µ–π—Å—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –∑–¥–µ—Å—å -->
                </div>
            </section>

            <!-- –°–µ–∫—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∏—è –∫–µ–π—Å–∞ -->
            <section class="open-section" id="open-section" style="display: none;">
                <div class="section-header">
                    <h2 id="case-title"></h2>
                    <button class="btn btn-small btn-outline" onclick="closeCaseView()">
                        <i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥
                    </button>
                </div>
                
                <div class="case-details">
                    <div class="case-preview">
                        <div class="case-image" id="case-image">
                            <div class="case-price" id="case-price"></div>
                        </div>
                        <div class="case-info">
                            <p id="case-description"></p>
                            <div class="case-stats">
                                <span><i class="fas fa-users"></i> –£—á–∞—Å—Ç–Ω–∏–∫–æ–≤: <span id="case-participants">0</span></span>
                                <span><i class="fas fa-gifts"></i> –ü–æ–¥–∞—Ä–∫–æ–≤: <span id="case-gifts-count">0</span></span>
                            </div>
                        </div>
                    </div>

                    <div class="action-buttons">
                        <button class="btn btn-primary btn-large" onclick="openCase()" id="open-case-btn">
                            <i class="fas fa-box-open"></i> –û—Ç–∫—Ä—ã—Ç—å –∑–∞ <span id="open-price">100</span> ‚ÇΩ
                        </button>
                        <button class="btn btn-secondary" onclick="addGiftToCase()">
                            <i class="fas fa-plus-circle"></i> –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–∞—Ä–æ–∫
                        </button>
                    </div>

                    <!-- –°–ø–∏—Å–æ–∫ –ø–æ–¥–∞—Ä–∫–æ–≤ –≤ –∫–µ–π—Å–µ -->
                    <div class="gifts-list">
                        <h3><i class="fas fa-gifts"></i> –ü–æ–¥–∞—Ä–∫–∏ –≤ –∫–µ–π—Å–µ</h3>
                        <div class="gifts-container" id="case-gifts">
                            <!-- –ü–æ–¥–∞—Ä–∫–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –∑–¥–µ—Å—å -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- –°–µ–∫—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ -->
            <section class="result-section" id="result-section" style="display: none;">
                <div class="result-container">
                    <div class="result-header">
                        <h2><i class="fas fa-trophy"></i> –†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–æ–∑—ã–≥—Ä—ã—à–∞</h2>
                    </div>
                    
                    <div class="result-content">
                        <div class="prize-animation" id="prize-animation">
                            <div class="spinner" id="spinner">
                                <div class="spinner-item">üéÅ</div>
                                <div class="spinner-item">üí∞</div>
                                <div class="spinner-item">üèÜ</div>
                                <div class="spinner-item">üéÆ</div>
                                <div class="spinner-item">üì±</div>
                            </div>
                        </div>
                        
                        <div class="prize-result" id="prize-result" style="display: none;">
                            <div class="prize-card" id="prize-card">
                                <div class="prize-icon" id="prize-icon">üéÅ</div>
                                <h3 id="prize-name">–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–∏–∑–∞</h3>
                                <p class="prize-value" id="prize-value">1000 ‚ÇΩ</p>
                                <p class="prize-donor" id="prize-donor"></p>
                            </div>
                            
                            <div class="result-actions">
                                <button class="btn btn-success" onclick="claimPrize()" id="claim-btn">
                                    <i class="fas fa-check-circle"></i> –ó–∞–±—Ä–∞—Ç—å –ø—Ä–∏–∑
                                </button>
                                <button class="btn btn-outline" onclick="tryAgain()">
                                    <i class="fas fa-redo"></i> –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –µ—â—ë
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- –°–µ–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–∞—Ä–∫–∞ -->
            <section class="add-gift-section" id="add-gift-section" style="display: none;">
                <div class="section-header">
                    <h2><i class="fas fa-plus-circle"></i> –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–∞—Ä–æ–∫</h2>
                    <button class="btn btn-small btn-outline" onclick="closeAddGift()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="add-gift-form">
                    <div class="form-group">
                        <label for="gift-name"><i class="fas fa-tag"></i> –ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ–¥–∞—Ä–∫–∞</label>
                        <input type="text" id="gift-name" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: iPhone 15" class="form-input">
                    </div>
                    
                    <div class="form-group">
                        <label for="gift-value"><i class="fas fa-coins"></i> –°—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ–¥–∞—Ä–∫–∞ (‚ÇΩ)</label>
                        <input type="number" id="gift-value" placeholder="1000" min="10" class="form-input">
                        <small class="hint">–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: 10 ‚ÇΩ</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="gift-description"><i class="fas fa-align-left"></i> –û–ø–∏—Å–∞–Ω–∏–µ</label>
                        <textarea id="gift-description" placeholder="–û–ø–∏—à–∏—Ç–µ –≤–∞—à –ø–æ–¥–∞—Ä–æ–∫..." class="form-textarea" rows="3"></textarea>
                    </div>
                    
                    <div class="commission-info-card">
                        <div class="commission-row">
                            <span>–°—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ–¥–∞—Ä–∫–∞:</span>
                            <span id="display-gift-value">0 ‚ÇΩ</span>
                        </div>
                        <div class="commission-row">
                            <span>–ö–æ–º–∏—Å—Å–∏—è (5%):</span>
                            <span id="display-commission">0 ‚ÇΩ</span>
                        </div>
                        <div class="commission-row total">
                            <span>–ò—Ç–æ–≥–æ –∫ –æ–ø–ª–∞—Ç–µ:</span>
                            <span id="display-total">0 ‚ÇΩ</span>
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button class="btn btn-primary" onclick="addGift()" id="add-gift-btn">
                            <i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å –∑–∞ <span id="add-gift-total">0</span> ‚ÇΩ
                        </button>
                        <button class="btn btn-outline" onclick="closeAddGift()">
                            –û—Ç–º–µ–Ω–∞
                        </button>
                    </div>
                </div>
            </section>
        </main>

        <!-- –ü–æ–¥–≤–∞–ª -->
        <footer class="footer">
            <div class="stats">
                <div class="stat-item">
                    <i class="fas fa-box-open"></i>
                    <span>–û—Ç–∫—Ä—ã—Ç–æ: <strong id="stats-opened">0</strong></span>
                </div>
                <div class="stat-item">
                    <i class="fas fa-gift"></i>
                    <span>–í—ã–∏–≥—Ä–∞–Ω–æ: <strong id="stats-won">0</strong></span>
                </div>
                <div class="stat-item">
                    <i class="fas fa-plus-circle"></i>
                    <span>–î–æ–±–∞–≤–ª–µ–Ω–æ: <strong id="stats-added">0</strong></span>
                </div>
            </div>
            <div class="footer-info">
                <button class="btn-link" onclick="showRules()">
                    <i class="fas fa-question-circle"></i> –ü—Ä–∞–≤–∏–ª–∞
                </button>
                <span class="version">v1.0</span>
                <button class="btn-link" onclick="showProfile()">
                    <i class="fas fa-user"></i> –ü—Ä–æ—Ñ–∏–ª—å
                </button>
            </div>
        </footer>

        <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
        <div class="modal-overlay" id="rules-modal" style="display: none;">
            <div class="modal">
                <div class="modal-header">
                    <h3><i class="fas fa-book"></i> –ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã</h3>
                    <button class="btn-close" onclick="closeModal('rules-modal')">√ó</button>
                </div>
                <div class="modal-body">
                    <div class="rules-list">
                        <div class="rule-item">
                            <div class="rule-icon">üéÅ</div>
                            <div class="rule-content">
                                <h4>–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–∞—Ä–∫–æ–≤</h4>
                                <p>–í—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –ª—é–±–æ–π –ø–æ–¥–∞—Ä–æ–∫ –≤ –∫–µ–π—Å. –ü—Ä–∏ —ç—Ç–æ–º —Å –≤–∞—à–µ–≥–æ –±–∞–ª–∞–Ω—Å–∞ —Å–ø–∏—à–µ—Ç—Å—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ–¥–∞—Ä–∫–∞ + 5% –∫–æ–º–∏—Å—Å–∏—è.</p>
                            </div>
                        </div>
                        <div class="rule-item">
                            <div class="rule-icon">üé∞</div>
                            <div class="rule-content">
                                <h4>–û—Ç–∫—Ä—ã—Ç–∏–µ –∫–µ–π—Å–æ–≤</h4>
                                <p>–ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –∫–µ–π—Å–∞ –≤—ã –ø–ª–∞—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—É—é —Ü–µ–Ω—É. –í—ã –º–æ–∂–µ—Ç–µ –≤—ã–∏–≥—Ä–∞—Ç—å –ª—é–±–æ–π –ø–æ–¥–∞—Ä–æ–∫ –∏–∑ –∫–µ–π—Å–∞.</p>
                            </div>
                        </div>
                        <div class="rule-item">
                            <div class="rule-icon">üí∞</div>
                            <div class="rule-content">
                                <h4>–ö–æ–º–∏—Å—Å–∏—è</h4>
                                <p>–ó–∞ –∫–∞–∂–¥—É—é –æ–ø–µ—Ä–∞—Ü–∏—é –≤–∑–∏–º–∞–µ—Ç—Å—è 5% –∫–æ–º–∏—Å—Å–∏–∏. –≠—Ç–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–±–æ—Ç—É –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã.</p>
                            </div>
                        </div>
                        <div class="rule-item">
                            <div class="rule-icon">üèÜ</div>
                            <div class="rule-content">
                                <h4>–í—ã–∏–≥—Ä—ã—à –∏ –ø—Ä–æ–∏–≥—Ä—ã—à</h4>
                                <p>–ü—Ä–∏ –≤—ã–∏–≥—Ä—ã—à–µ –ø–æ–¥–∞—Ä–∫–∞, –æ–Ω –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ –≤–∞–º. –ï—Å–ª–∏ –∫—Ç–æ-—Ç–æ –≤—ã–∏–≥—Ä–∞–ª –≤–∞—à –ø–æ–¥–∞—Ä–æ–∫ - –≤—ã —Ç–µ—Ä—è–µ—Ç–µ –µ–≥–æ —Å—Ç–æ–∏–º–æ—Å—Ç—å.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal-overlay" id="profile-modal" style="display: none;">
            <div class="modal">
                <div class="modal-header">
                    <h3><i class="fas fa-user-circle"></i> –í–∞—à –ø—Ä–æ—Ñ–∏–ª—å</h3>
                    <button class="btn-close" onclick="closeModal('profile-modal')">√ó</button>
                </div>
                <div class="modal-body">
                    <div class="profile-info">
                        <div class="profile-avatar" id="profile-avatar">
                            TG
                        </div>
                        <h4 id="profile-name">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å Telegram</h4>
                        <div class="profile-stats">
                            <div class="profile-stat">
                                <span class="stat-label">–ë–∞–ª–∞–Ω—Å:</span>
                                <span class="stat-value" id="profile-balance">1000 ‚ÇΩ</span>
                            </div>
                            <div class="profile-stat">
                                <span class="stat-label">–í—Å–µ–≥–æ –æ—Ç–∫—Ä—ã—Ç–æ:</span>
                                <span class="stat-value" id="profile-opened">0 –∫–µ–π—Å–æ–≤</span>
                            </div>
                            <div class="profile-stat">
                                <span class="stat-label">–í—ã–∏–≥—Ä–∞–Ω–æ:</span>
                                <span class="stat-value" id="profile-won">0 –ø–æ–¥–∞—Ä–∫–æ–≤</span>
                            </div>
                            <div class="profile-stat">
                                <span class="stat-label">–î–æ–±–∞–≤–ª–µ–Ω–æ:</span>
                                <span class="stat-value" id="profile-added">0 –ø–æ–¥–∞—Ä–∫–æ–≤</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="profile-actions">
                        <button class="btn btn-outline" onclick="depositFunds()">
                            <i class="fas fa-coins"></i> –ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å
                        </button>
                        <button class="btn btn-outline" onclick="showTransactions()">
                            <i class="fas fa-history"></i> –ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal-overlay" id="transactions-modal" style="display: none;">
            <div class="modal">
                <div class="modal-header">
                    <h3><i class="fas fa-history"></i> –ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π</h3>
                    <button class="btn-close" onclick="closeModal('transactions-modal')">√ó</button>
                </div>
                <div class="modal-body">
                    <div class="transactions-list" id="transactions-list">
                        <!-- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –∑–¥–µ—Å—å -->
                    </div>
                </div>
            </div>
        </div>

        <div class="modal-overlay" id="create-case-modal" style="display: none;">
            <div class="modal">
                <div class="modal-header">
                    <h3><i class="fas fa-plus-square"></i> –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∫–µ–π—Å</h3>
                    <button class="btn-close" onclick="closeModal('create-case-modal')">√ó</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="new-case-name">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–µ–π—Å–∞</label>
                        <input type="text" id="new-case-name" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ö–µ–π—Å —Å —Ç–µ—Ö–Ω–∏–∫–æ–π" class="form-input">
                    </div>
                    <div class="form-group">
                        <label for="new-case-price">–¶–µ–Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è (‚ÇΩ)</label>
                        <input type="number" id="new-case-price" placeholder="100" min="10" class="form-input">
                    </div>
                    <div class="form-group">
                        <label for="new-case-description">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                        <textarea id="new-case-description" placeholder="–û–ø–∏—à–∏—Ç–µ –≤–∞—à –∫–µ–π—Å..." class="form-textarea" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="new-case-color">–¶–≤–µ—Ç –∫–µ–π—Å–∞</label>
                        <div class="color-selector">
                            <div class="color-option" style="background: #ff6b6b;" onclick="selectColor('#ff6b6b')"></div>
                            <div class="color-option" style="background: #4ecdc4;" onclick="selectColor('#4ecdc4')"></div>
                            <div class="color-option" style="background: #45b7d1;" onclick="selectColor('#45b7d1')"></div>
                            <div class="color-option" style="background: #96ceb4;" onclick="selectColor('#96ceb4')"></div>
                            <div class="color-option" style="background: #ffeaa7;" onclick="selectColor('#ffeaa7')"></div>
                        </div>
                        <input type="hidden" id="selected-color" value="#ff6b6b">
                    </div>
                    <div class="modal-actions">
                        <button class="btn btn-primary" onclick="createCase()">
                            <i class="fas fa-check"></i> –°–æ–∑–¥–∞—Ç—å –∫–µ–π—Å
                        </button>
                        <button class="btn btn-outline" onclick="closeModal('create-case-modal')">
                            –û—Ç–º–µ–Ω–∞
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
        <div class="notification" id="notification" style="display: none;">
            <div class="notification-content">
                <i class="fas fa-check-circle" id="notification-icon"></i>
                <span id="notification-text"></span>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>